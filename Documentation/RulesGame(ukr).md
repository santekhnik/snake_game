# Правила гри

## 1. Геймплей

### 1.1. Керування
- Гравець керує змійкою, повертаючись у чотирьох напрямках (WASD + стрілки).

### 1.2. Завершення гри
Гра завершується у випадку:
- **1.2.1** Удару у самого себе.
- **1.2.2** Коли змійка заповнила усе поле.

### 1.3. Набір очок
- Щоб набрати очки, потрібно їсти "яблука".

### 1.4. Генерація яблук
- Яблуко з’являється у випадковому місці.

### 1.5. Збільшення змійки
- При з’їданні яблука змійка збільшується в довжину.

### 1.6. Нарахування очок
_(в процесі розробки)_

---

# 2. Формат протоколу обміну

## 2.1. Архітектура
- ПК – це контролер, відповідно користувач подає команди руху на STM32.
- STM32 виконує логіку гри, займається обробкою рухів та надсиланням стану на ПК.
- Обмін даними здійснюється через **UART**.

## 2.2. Формат пакету
- **2.4.** Перший байт – стартовий байт.
- **2.5.** Другий байт – **CMD** (тип пакету).

### 2.5.1. Команди
| Значення CMD | Опис            | Відправник |
|-------------|----------------|------------|
| 1           | start          | ПК         |
| 2           | дані гри       | STM32      |
| 3           | butt          | ПК         |
| 4           | error handler | STM32      |
| 5           | pause         | ПК         |
| 6           | end           | STM32      |

## 2.6. Довжина інформації залежить від пакету (**preload**)
- **2.6.1.** `Preload` - 1 байт.
- **2.6.2.** 1 байт – довжина змійки, координати по 2 байти, яблуко – 2 байти.
- **2.6.3.** `Button` – 1 байт.
- **2.6.4.** `Error` – 2 байти.
- **2.6.5.** `Pause(start)` – 1 байт.
- **2.6.6.** `END` – 1 байт.

## 2.7. Контрольна сума
- **CRC16** – 2 байти.

## 2.8. Кінцевий байт перевірки.

## 2.9. Стан: **in progress**.

---

# 3. Обробка помилок

## 3.1. Види помилок
- **3.2.** CRC error (**перевірка контрольної суми**).
- **3.3.** Packet loss (**втрата пакету**).
